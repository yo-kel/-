修改了序列化方式，使其可以读取数据的类型，进一步选择反序列化方式

[参考](http://coliru.stacked-crooked.com/a/59d013806da401aa)

